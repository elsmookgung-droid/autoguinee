* {
  box-sizing: border-box;
  font-family: 'Inter', sans-serif;
}

body {
  margin: 0;
  background: #0f172a;
  color: #e5e7eb;
}

a {
  text-decoration: none;
  color: inherit;
}

header {
  background: linear-gradient(135deg, #2563eb, #1e40af);
  padding: 20px;
  text-align: center;
}

header h1 {
  margin: 0;
  font-size: 2.2rem;
}

nav {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 10px;
}

nav a {
  font-weight: 500;
  opacity: 0.9;
}

.container {
  padding: 20px;
}

.search input {
  width: 100%;
  padding: 15px;
  border-radius: 14px;
  border: none;
  font-size: 16px;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px,1fr));
  gap: 20px;
  margin-top: 20px;
}

.card {
  background: #1e293b;
  border-radius: 18px;
  padding: 18px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.4);
}

.card h3 {
  margin-top: 0;
}

.btn {
  display: inline-block;
  margin-top: 10px;
  padding: 12px 16px;
  border-radius: 12px;
  background: #2563eb;
  color: white;
  text-align: center;
}

.chat-box {
  background: #020617;
  height: 70vh;
  border-radius: 16px;
  padding: 15px;
  display: flex;
  flex-direction: column;
}

.messages {
  flex: 1;
  overflow-y: auto;
}

.msg {
  margin-bottom: 10px;
  max-width: 70%;
  padding: 10px;
  border-radius: 12px;
}

.me {
  background: #2563eb;
  align-self: flex-end;
}

.other {
  background: #1e293b;
}

.input-chat {
  display: flex;
  gap: 10px;
}

.input-chat input {
  flex: 1;
  padding: 12px;
  border-radius: 12px;
  border: none;
}enter;font-weight:bold;color:#1e90ff;cursor:pointer;font-size:14px;}
.menu-btn.active {background:#1e90ff;color:white;}
#add-piece-form, #search-bar, #filter-bar {display:none;}
#search-bar input, #filter-bar select {width:100%;padding:8px;margin-bottom:10px;border-radius:5px;border:1px solid #ccc;box-sizing:border-box;}
</style>
</head>
<body>

<header><i class="fa-solid fa-car"></i> AutoPièces GN</header>

<div class="container">
  <!-- Barre de recherche -->
  <div id="search-bar">
    <input type="text" id="search-input" placeholder="Rechercher par nom ou voiture...">
  </div>
  
  <!-- Barre de filtrage -->
  <div id="filter-bar">
    <select id="filter-car">
      <option value="">Toutes les voitures</option>
    </select>
  </div>

  <!-- Formulaire pour ajouter une pièce -->
  <form id="add-piece-form">
    <h3>Ajouter une pièce</h3>
    <input type="text" id="piece-name" placeholder="Nom de la pièce" required>
    <input type="text" id="car-brand" placeholder="Marque de voiture" required>
    <input type="number" id="year" placeholder="Année" required>
    <input type="number" id="price" placeholder="Prix en GNF" required>
    <input type="text" id="contact" placeholder="Numéro ou WhatsApp" required>
    <input type="text" id="photo-url" placeholder="Lien photo (URL)" required>
    <button type="submit">Ajouter la pièce</button>
  </form>

  <!-- Liste des pièces -->
  <div id="pieces-list"></div>
</div>

<!-- Menu fixe -->
<div class="bottom-menu">
  <div class="menu-btn active" id="menu-home"><i class="fa-solid fa-list"></i><br>Liste</div>
  <div class="menu-btn" id="menu-add"><i class="fa-solid fa-plus"></i><br>Ajouter</div>
  <div class="menu-btn" id="menu-search"><i class="fa-solid fa-magnifying-glass"></i><br>Rechercher</div>
  <div class="menu-btn" id="menu-filter"><i class="fa-solid fa-filter"></i><br>Filtrer</div>
</div>

<script>
const piecesList = document.getElementById('pieces-list');
const form = document.getElementById('add-piece-form');
const searchBar = document.getElementById('search-bar');
const searchInput = document.getElementById('search-input');
const filterBar = document.getElementById('filter-bar');
const filterSelect = document.getElementById('filter-car');

let pieces = JSON.parse(localStorage.getItem('pieces')) || [];

// Générer 100+ pièces si vide
if(pieces.length === 0){
  const voitures = ["Toyota Corolla","Mercedes C200","Honda Civic","Nissan X-Trail","BMW Série 3","Ford Fiesta","Hyundai Elantra","Volkswagen Golf","Renault Clio","Kia Rio"];
  const piecesTypes = ["Alternateur","Frein à disque","Pompe à eau","Amortisseur","Filtre à huile","Batterie","Bougie","Radiateur","Embrayage","Filtre à air"];
  voitures.forEach(voiture=>{
    piecesTypes.forEach(pType=>{
      pieces.push({
        name:pType,
        brand:voiture,
        year:2015 + Math.floor(Math.random()*5),
        price:100000 + Math.floor(Math.random()*100000),
        contact:"224600000000",
        photo:"https://via.placeholder.com/80x80?text="+encodeURIComponent(pType+"-"+voiture)
      });
    });
  });
  localStorage.setItem('pieces',JSON.stringify(pieces));
}

// Remplir filtre voitures
const carsSet = new Set(pieces.map(p=>p.brand));
carsSet.forEach(car=>{
  const option=document.createElement('option');
  option.value=car; option.textContent=car;
  filterSelect.appendChild(option);
});

function displayPieces(filter='',carFilter=''){
  piecesList.innerHTML='';
  pieces.filter(p=>
    (p.name.toLowerCase().includes(filter) || p.brand.toLowerCase().includes(filter)) &&
    (carFilter==='' || p.brand===carFilter)
  ).forEach(p=>{
    const card=document.createElement('div');
    card.classList.add('piece-card');
    card.innerHTML=`
      <img src="${p.photo}" alt="Pièce auto">
      <div class="piece-content">
        <h3>${p.name}</h3>
        <p>Voiture: ${p.brand}</p>
        <p>Année: ${p.year}</p>
        <p>Prix: ${p.price} GNF</p>
        <a class="contact-btn" href="https://wa.me/${p.contact}" target="_blank"><i class="fa-brands fa-whatsapp"></i> Contacter</a>
      </div>
    `;
    piecesList.appendChild(card);
  });
}

displayPieces();

form.addEventListener('submit',e=>{
  e.preventDefault();
  const name=document.getElementById('piece-name').value;
  const brand=document.getElementById('car-brand').value;
  const year=document.getElementById('year').value;
  const price=document.getElementById('price').value;
  const contact=document.getElementById('contact').value;
  const photo=document.getElementById('photo-url').value;
  pieces.push({name,brand,year,price,contact,photo});
  localStorage.setItem('pieces',JSON.stringify(pieces));
  displayPieces();
  form.reset();
  // Ajouter au filtre si nouveau
  if(!Array.from(filterSelect.options).some(opt=>opt.value===brand)){
    const option=document.createElement('option');
    option.value=brand; option.textContent=brand;
    filterSelect.appendChild(option);
  }
});

// Menu navigation
const menuHome=document.getElementById('menu-home');
const menuAdd=document.getElementById('menu-add');
const menuSearch=document.getElementById('menu-search');
const menuFilter=document.getElementById('menu-filter');
const menuBtns=[menuHome,menuAdd,menuSearch,menuFilter];

menuHome.addEventListener('click',()=>{
  piecesList.style.display='block';
  form.style.display='none';
  searchBar.style.display='none';
  filterBar.style.display='none';
  menuBtns.forEach(btn=>btn.classList.remove('active'));
  menuHome.classList.add('active');
});
menuAdd.addEventListener('click',()=>{
  piecesList.style.display='none';
  form.style.display='block';
  searchBar.style.display='none';
  filterBar.style.display='none';
  menuBtns.forEach(btn=>btn.classList.remove('active'));
  menuAdd.classList.add('active');
});
menuSearch.addEventListener('click',()=>{
  piecesList.style.display='block';
  form.style.display='none';
  searchBar.style.display='block';
  filterBar.style.display='none';
  menuBtns.forEach(btn=>btn.classList.remove('active'));
  menuSearch.classList.add('active');
});
menuFilter.addEventListener('click',()=>{
  piecesList.style.display='block';
  form.style.display='none';
  searchBar.style.display='none';
  filterBar.style.display='block';
  menuBtns.forEach(btn=>btn.classList.remove('active'));
  menuFilter.classList.add('active');
});

searchInput.addEventListener('input',()=>{
  displayPieces(searchInput.value.toLowerCase(),filterSelect.value);
});
filterSelect.addEventListener('change',()=>{
  displayPieces(searchInput.value.toLowerCase(),filterSelect.value);
});
</script>
</body>
</html>